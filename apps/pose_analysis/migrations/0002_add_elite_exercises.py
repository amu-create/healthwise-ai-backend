# Generated by Django - Elite Exercise Data Migration

from django.db import migrations
import json


def add_elite_exercises(apps, schema_editor):
    Exercise = apps.get_model('pose_analysis', 'Exercise')
    
    # ê¸°ì¡´ ìš´ë™ ì—…ë°ì´íŠ¸ ë° ìƒˆë¡œìš´ ì—˜ë¦¬íŠ¸ ìš´ë™ ì¶”ê°€
    elite_exercises = [
        {
            'name': 'ìŠ¤ì¿¼íŠ¸',
            'name_en': 'squat',
            'category': 'lower',
            'difficulty': 'beginner',
            'description': 'í•˜ì²´ ê·¼ë ¥ì˜ ê¸°ë³¸ì´ ë˜ëŠ” ìš´ë™. ëŒ€í‡´ì‚¬ë‘ê·¼, ë‘”ê·¼, í–„ìŠ¤íŠ¸ë§ì„ ì¢…í•©ì ìœ¼ë¡œ ë°œë‹¬ì‹œí‚µë‹ˆë‹¤.',
            'target_muscles': ['ëŒ€í‡´ì‚¬ë‘ê·¼', 'ë‘”ê·¼', 'í–„ìŠ¤íŠ¸ë§', 'ì¢…ì•„ë¦¬', 'ì½”ì–´'],
            'angle_calculations': {
                'spine_angle': {'points': ['shoulder', 'hip', 'knee'], 'ideal': 5, 'tolerance': 10},
                'knee_angle': {'points': ['hip', 'knee', 'ankle'], 'ideal': 90, 'tolerance': 15},
                'hip_angle': {'points': ['shoulder', 'hip', 'knee'], 'ideal': 90, 'tolerance': 20}
            },
            'key_points': [
                'ë°œì„ ì–´ê¹¨ ë„ˆë¹„ë¡œ ë²Œë¦¬ê³  ë°œëì€ ì•½ê°„ ë°”ê¹¥ìª½ìœ¼ë¡œ',
                'ê°€ìŠ´ì„ í´ê³  ì‹œì„ ì€ ì •ë©´ ë˜ëŠ” ì•½ê°„ ìœ„ë¡œ',
                'ì—‰ë©ì´ë¥¼ ë’¤ë¡œ ë¹¼ë©´ì„œ ë¬´ë¦ì„ êµ½í™ë‹ˆë‹¤',
                'ë¬´ë¦ì´ ë°œëì„ ë„˜ì§€ ì•Šë„ë¡ ì£¼ì˜',
                'í—ˆë²…ì§€ê°€ ë°”ë‹¥ê³¼ í‰í–‰ì´ ë  ë•Œê¹Œì§€ í•˜ê°•',
                'ë°œë’¤ê¿ˆì¹˜ë¡œ ë°”ë‹¥ì„ ë°€ì–´ ì¼ì–´ë‚©ë‹ˆë‹¤'
            ],
            'icon': 'ğŸ‹ï¸'
        },
        {
            'name': 'ë°ë“œë¦¬í”„íŠ¸',
            'name_en': 'deadlift',
            'category': 'fullbody',
            'difficulty': 'intermediate',
            'description': 'ì „ì‹  ê·¼ë ¥ì˜ ì™•. ì²™ì¶”ê¸°ë¦½ê·¼, ë‘”ê·¼, í–„ìŠ¤íŠ¸ë§ì„ ì¤‘ì‹¬ìœ¼ë¡œ ì „ì‹ ì„ ë‹¨ë ¨í•©ë‹ˆë‹¤.',
            'target_muscles': ['í–„ìŠ¤íŠ¸ë§', 'ë‘”ê·¼', 'ì²™ì¶”ê¸°ë¦½ê·¼', 'ê´‘ë°°ê·¼', 'ìŠ¹ëª¨ê·¼', 'ì „ì™„ê·¼'],
            'angle_calculations': {
                'spine_neutrality': {'points': ['shoulder', 'hip', 'knee'], 'ideal': 0, 'tolerance': 5},
                'hip_hinge': {'points': ['shoulder', 'hip', 'knee'], 'ideal': 45, 'tolerance': 15},
                'bar_path': {'type': 'vertical_deviation', 'ideal': 0, 'tolerance': 5}
            },
            'key_points': [
                'ë°œì„ ì—‰ë©ì´ ë„ˆë¹„ë¡œ ë²Œë¦¬ê³  ë°”ë²¨ ì•„ë˜ ì„œê¸°',
                'ë¬´ë¦ì„ ì‚´ì§ êµ½íˆê³  ì—‰ë©ì´ë¥¼ ë’¤ë¡œ ë¹¼ë©° ìƒì²´ ìˆ™ì´ê¸°',
                'ë“±ì„ ê³§ê²Œ í´ê³  ê°€ìŠ´ì„ ì—´ì–´ ì²™ì¶” ì¤‘ë¦½ ìœ ì§€',
                'ë°”ë²¨ì„ ì •ê°•ì´ì— ê°€ê¹ê²Œ ìœ ì§€í•˜ë©° ë“¤ì–´ì˜¬ë¦¬ê¸°',
                'ì—‰ë©ì´ì™€ ë¬´ë¦ì„ ë™ì‹œì— í´ë©° ì¼ì–´ì„œê¸°',
                'ì •ì ì—ì„œ ì—‰ë©ì´ë¥¼ ì•ìœ¼ë¡œ ë°€ì–´ ë½ì•„ì›ƒ'
            ],
            'icon': 'ğŸ’ª'
        },
        {
            'name': 'ì˜¤ë²„í—¤ë“œí”„ë ˆìŠ¤',
            'name_en': 'overhead_press',
            'category': 'upper',
            'difficulty': 'intermediate',
            'description': 'ì–´ê¹¨ ê·¼ë ¥ì˜ í•µì‹¬. ì „ë©´ ì‚¼ê°ê·¼ê³¼ ì¸¡ë©´ ì‚¼ê°ê·¼ì„ ì§‘ì¤‘ì ìœ¼ë¡œ ë°œë‹¬ì‹œí‚µë‹ˆë‹¤.',
            'target_muscles': ['ì „ë©´ì‚¼ê°ê·¼', 'ì¸¡ë©´ì‚¼ê°ê·¼', 'ì‚¼ë‘ê·¼', 'ì½”ì–´', 'ìƒë¶€ìŠ¹ëª¨ê·¼'],
            'angle_calculations': {
                'lumbar_extension': {'points': ['hip', 'shoulder'], 'ideal': 0, 'tolerance': 10},
                'elbow_flare': {'type': 'frontal_plane', 'ideal': 45, 'tolerance': 15},
                'bar_path': {'type': 'vertical', 'ideal': 90, 'tolerance': 5}
            },
            'key_points': [
                'ë°”ë²¨ì„ ì‡„ê³¨ ë†’ì´ì—ì„œ ì¡ê³  íŒ”ê¿ˆì¹˜ë¥¼ ì•½ê°„ ì•ìœ¼ë¡œ',
                'ì½”ì–´ë¥¼ ë‹¨ë‹¨íˆ ì¡°ì´ê³  ì—‰ë©ì´ì— í˜ì£¼ê¸°',
                'ë°”ë²¨ì„ í„±ì„ ìŠ¤ì¹˜ë©° ìˆ˜ì§ìœ¼ë¡œ ë°€ì–´ì˜¬ë¦¬ê¸°',
                'íŒ”ê¿ˆì¹˜ë¥¼ ì™„ì „íˆ í´ë©° ë¨¸ë¦¬ ìœ„ë¡œ í”„ë ˆìŠ¤',
                'í—ˆë¦¬ê°€ ê³¼ë„í•˜ê²Œ ì –í˜€ì§€ì§€ ì•Šë„ë¡ ì£¼ì˜',
                'ì²œì²œíˆ ì‹œì‘ ìœ„ì¹˜ë¡œ ë‚´ë¦¬ê¸°'
            ],
            'icon': 'ğŸ‹ï¸â€â™‚ï¸'
        },
        {
            'name': 'ë²¤ì¹˜í”„ë ˆìŠ¤',
            'name_en': 'bench_press',
            'category': 'upper',
            'difficulty': 'beginner',
            'description': 'ê°€ìŠ´ ê·¼ìœ¡ ë°œë‹¬ì˜ ê¸°ë³¸. ëŒ€í‰ê·¼, ì‚¼ë‘ê·¼, ì „ë©´ì‚¼ê°ê·¼ì„ ì¢…í•©ì ìœ¼ë¡œ ë‹¨ë ¨í•©ë‹ˆë‹¤.',
            'target_muscles': ['ëŒ€í‰ê·¼', 'ì‚¼ë‘ê·¼', 'ì „ë©´ì‚¼ê°ê·¼'],
            'angle_calculations': {
                'elbow_angle': {'type': 'torso_relative', 'ideal': 75, 'tolerance': 15},
                'wrist_angle': {'points': ['elbow', 'wrist', 'index'], 'ideal': 180, 'tolerance': 30},
                'bar_touch': {'type': 'chest_position', 'ideal': 'mid_chest', 'tolerance': 10}
            },
            'key_points': [
                'ë²¤ì¹˜ì— ëˆ„ì›Œ ê²¬ê°‘ê³¨ì„ ëª¨ìœ¼ê³  ì•„ë˜ë¡œ ë‹¹ê¸°ê¸°',
                'ì ì ˆí•œ ì•„ì¹˜ë¥¼ ë§Œë“¤ì–´ ì•ˆì •ì ì¸ ìì„¸ ìœ ì§€',
                'ë°”ë²¨ì„ ì–´ê¹¨ë³´ë‹¤ ì•½ê°„ ë„“ê²Œ ì¡ê¸°',
                'ë°”ë²¨ì„ ê°€ìŠ´ ì¤‘ì•™ìœ¼ë¡œ ì²œì²œíˆ ë‚´ë¦¬ê¸°',
                'íŒ”ê¿ˆì¹˜ë¥¼ 45-75ë„ ê°ë„ë¡œ ìœ ì§€',
                'ê°€ìŠ´ ê·¼ìœ¡ìœ¼ë¡œ ë°”ë²¨ì„ ë°€ì–´ì˜¬ë¦¬ê¸°'
            ],
            'icon': 'ğŸ‹ï¸'
        },
        {
            'name': 'í”Œë­í¬',
            'name_en': 'plank',
            'category': 'core',
            'difficulty': 'beginner',
            'description': 'ì½”ì–´ ì•ˆì •ì„±ì˜ ê¸°ì´ˆ. ë³µì§ê·¼, ë³µíš¡ê·¼, ë³µì‚¬ê·¼ì„ í¬í•¨í•œ ì „ì²´ ì½”ì–´ë¥¼ ê°•í™”í•©ë‹ˆë‹¤.',
            'target_muscles': ['ë³µì§ê·¼', 'ë³µíš¡ê·¼', 'ë³µì‚¬ê·¼', 'ë‘”ê·¼', 'ì²™ì¶”ê¸°ë¦½ê·¼'],
            'angle_calculations': {
                'body_alignment': {'points': ['shoulder', 'hip', 'ankle'], 'ideal': 180, 'tolerance': 10},
                'hip_height': {'type': 'relative_position', 'ideal': 'neutral', 'tolerance': 5},
                'head_position': {'points': ['ear', 'shoulder', 'hip'], 'ideal': 180, 'tolerance': 15}
            },
            'key_points': [
                'íŒ”ê¿ˆì¹˜ë¥¼ ì–´ê¹¨ ë°”ë¡œ ì•„ë˜ ìœ„ì¹˜',
                'ë¨¸ë¦¬ë¶€í„° ë°œëê¹Œì§€ ì¼ì§ì„  ìœ ì§€',
                'ë³µë¶€ì™€ ë‘”ê·¼ì— í˜ì„ ì£¼ì–´ ê³¨ë°˜ ì•ˆì •í™”',
                'ëª©ì€ ì²™ì¶”ì™€ ì¼ì§ì„ ìœ¼ë¡œ ìœ ì§€',
                'í˜¸í¡ì„ ì¼ì •í•˜ê²Œ ìœ ì§€í•˜ë©° ë²„í‹°ê¸°',
                'ì—‰ë©ì´ê°€ ì²˜ì§€ê±°ë‚˜ ì˜¬ë¼ê°€ì§€ ì•Šë„ë¡ ì£¼ì˜'
            ],
            'icon': 'ğŸ§˜'
        },
        {
            'name': 'í‘¸ì‰¬ì—…',
            'name_en': 'pushup',
            'category': 'upper',
            'difficulty': 'beginner',
            'description': 'ìƒì²´ ê·¼ë ¥ì˜ ê¸°ë³¸. ì²´ì¤‘ì„ ì´ìš©í•´ ê°€ìŠ´, ì–´ê¹¨, ì‚¼ë‘ê·¼ì„ ë‹¨ë ¨í•©ë‹ˆë‹¤.',
            'target_muscles': ['ëŒ€í‰ê·¼', 'ì‚¼ë‘ê·¼', 'ì „ë©´ì‚¼ê°ê·¼', 'ì½”ì–´'],
            'angle_calculations': {
                'elbow_angle': {'points': ['shoulder', 'elbow', 'wrist'], 'ideal': 90, 'tolerance': 20},
                'body_angle': {'points': ['shoulder', 'hip', 'ankle'], 'ideal': 180, 'tolerance': 15}
            },
            'key_points': [
                'ì†ì„ ì–´ê¹¨ë³´ë‹¤ ì•½ê°„ ë„“ê²Œ ë²Œë ¤ ë°”ë‹¥ì— ëŒ€ê¸°',
                'ë¨¸ë¦¬ë¶€í„° ë°œëê¹Œì§€ ì¼ì§ì„  ìœ ì§€',
                'ê°€ìŠ´ì´ ë°”ë‹¥ì— ê±°ì˜ ë‹¿ì„ ë•Œê¹Œì§€ íŒ”ê¿ˆì¹˜ êµ½íˆê¸°',
                'íŒ”ê¿ˆì¹˜ë¥¼ 45ë„ ê°ë„ë¡œ ìœ ì§€',
                'ê°€ìŠ´ ê·¼ìœ¡ìœ¼ë¡œ ë°”ë‹¥ì„ ë°€ì–´ ì˜¬ë¼ì˜¤ê¸°'
            ],
            'icon': 'ğŸ’ª'
        },
        {
            'name': 'ëŸ°ì§€',
            'name_en': 'lunge',
            'category': 'lower',
            'difficulty': 'beginner',
            'description': 'í•˜ì²´ ê· í˜•ê³¼ ê·¼ë ¥ì„ ë™ì‹œì—. í•œìª½ ë‹¤ë¦¬ì”© ì§‘ì¤‘ì ìœ¼ë¡œ ë‹¨ë ¨í•©ë‹ˆë‹¤.',
            'target_muscles': ['ëŒ€í‡´ì‚¬ë‘ê·¼', 'ë‘”ê·¼', 'í–„ìŠ¤íŠ¸ë§', 'ì¢…ì•„ë¦¬'],
            'angle_calculations': {
                'front_knee': {'points': ['hip', 'knee', 'ankle'], 'ideal': 90, 'tolerance': 15},
                'back_knee': {'points': ['hip', 'knee', 'ankle'], 'ideal': 90, 'tolerance': 20}
            },
            'key_points': [
                'í•œ ë°œì„ í¬ê²Œ ì•ìœ¼ë¡œ ë‚´ë”›ê¸°',
                'ì•ìª½ ë¬´ë¦ì„ 90ë„ë¡œ êµ½íˆë©° í•˜ê°•',
                'ë’¤ìª½ ë¬´ë¦ì´ ë°”ë‹¥ì— ê±°ì˜ ë‹¿ì„ ì •ë„ë¡œ ë‚´ë¦¬ê¸°',
                'ìƒì²´ëŠ” ê³§ê²Œ ì„¸ìš´ ìƒíƒœ ìœ ì§€',
                'ì•ìª½ ë°œë’¤ê¿ˆì¹˜ë¡œ ë°€ì–´ ì¼ì–´ë‚˜ê¸°'
            ],
            'icon': 'ğŸ¦µ'
        },
        {
            'name': 'ë²„í”¼',
            'name_en': 'burpee',
            'category': 'fullbody',
            'difficulty': 'advanced',
            'description': 'ì „ì‹  ì»¨ë””ì…”ë‹ì˜ ì™•. ê·¼ë ¥, ì‹¬íì§€êµ¬ë ¥, ë¯¼ì²©ì„±ì„ ë™ì‹œì— í–¥ìƒì‹œí‚µë‹ˆë‹¤.',
            'target_muscles': ['ì „ì‹ '],
            'angle_calculations': {
                'dynamic_phases': True,
                'squat_phase': {'points': ['hip', 'knee', 'ankle'], 'ideal': 90},
                'plank_phase': {'points': ['shoulder', 'hip', 'ankle'], 'ideal': 180}
            },
            'key_points': [
                'ì„œìˆëŠ” ìì„¸ì—ì„œ ì‹œì‘',
                'ìŠ¤ì¿¼íŠ¸ ìì„¸ë¡œ ì•‰ìœ¼ë©° ì†ì„ ë°”ë‹¥ì—',
                'ë‹¤ë¦¬ë¥¼ ë’¤ë¡œ ë»—ì–´ í”Œë­í¬ ìì„¸',
                'í‘¸ì‰¬ì—… 1íšŒ ì‹¤ì‹œ',
                'ë‹¤ë¦¬ë¥¼ ë‹¹ê²¨ ìŠ¤ì¿¼íŠ¸ ìì„¸ë¡œ',
                'í­ë°œì ìœ¼ë¡œ ì í”„í•˜ë©° ì¼ì–´ì„œê¸°'
            ],
            'icon': 'ğŸ”¥'
        }
    ]
    
    for exercise_data in elite_exercises:
        try:
            # update_or_create ëŒ€ì‹  ë¨¼ì € ì¡´ì¬ ì—¬ë¶€ í™•ì¸
            exercise = Exercise.objects.filter(name_en=exercise_data['name_en']).first()
            
            if exercise:
                # ê¸°ì¡´ ìš´ë™ ì—…ë°ì´íŠ¸
                for key, value in exercise_data.items():
                    setattr(exercise, key, value)
                exercise.save()
                print(f"Updated exercise: {exercise_data['name']}")
            else:
                # ìƒˆë¡œìš´ ìš´ë™ ìƒì„± (ID ìë™ í• ë‹¹)
                Exercise.objects.create(**exercise_data)
                print(f"Created new exercise: {exercise_data['name']}")
                
        except Exception as e:
            print(f"Error processing exercise {exercise_data['name']}: {str(e)}")
            # ì˜¤ë¥˜ê°€ ë°œìƒí•´ë„ ë‹¤ìŒ ìš´ë™ ì²˜ë¦¬ ê³„ì†


def reverse_elite_exercises(apps, schema_editor):
    Exercise = apps.get_model('pose_analysis', 'Exercise')
    # ì‚­ì œëŠ” í•˜ì§€ ì•Šê³  ë¡œê·¸ë§Œ ì¶œë ¥
    exercise_names = ['squat', 'deadlift', 'overhead_press', 'bench_press', 'plank', 'pushup', 'lunge', 'burpee']
    print(f"Reverse migration called for exercises: {exercise_names}")


class Migration(migrations.Migration):

    dependencies = [
        ('pose_analysis', '0001_initial'),  # ì‹¤ì œ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ëª…ìœ¼ë¡œ ìˆ˜ì • í•„ìš”
    ]

    operations = [
        migrations.RunPython(add_elite_exercises, reverse_elite_exercises),
    ]
